# Section 7: Integration Capabilities and Methods – Diagrams

This file defines the visuals for Section 7. Each diagram must make integration paths unambiguous, show controls and fallbacks, and highlight how all paths converge into the SmartAPI compliance core.

---

## Diagram 17: Integration Wheel – Multi Channel Entry Points

### Intent
Show all available integration methods at a glance and how they converge into Bluelight SmartAPI, then on to FIRS MBS and the archive. This is the anchor visual for executives and architects.

### Canvas Layout
Radial wheel or hub and spoke. Four spokes feed into the SmartAPI core at center. Outbound from SmartAPI to FIRS and to Archive and Dashboards.

### Elements to Show
- **Spokes Incoming to the Hub**
  - SmartAPI REST from ERP and billing systems. Caption: Direct API integration
  - File and SFTP batch ingestion. Caption: Scheduled or ad hoc drops
  - Email Connector. Caption: Send invoice as attachment
  - BlueBox capture. Caption: Print or folder capture, zero ERP change
- **Hub**
  - Box: Bluelight SmartAPI Compliance Core
  - Inside bullets: Transform, Validate, Sign, QR, Submit, Archive, Monitor
- **Outbound Paths**
  - Arrow to FIRS MBS with TLS 1.3 label
  - Arrow to Evidence Archive WORM
  - Arrow to Dashboards and Webhooks
- **Badges**
  - Idempotency, Retries, Replay Queue along the SmartAPI perimeter
  - Security badges: OAuth 2.0 or mTLS

### Callouts
- Note: All channels share the same compliance engine and monitoring
- Note: Channels can be mixed in the same tenant

### Style
- Clean wheel, equal weight spokes, color code each channel
- Legend for channel icons and security badges

---

## Diagram 18: File and Batch Flow

### Intent
Explain how batch files are processed with integrity checks, scheduling, and per invoice outcomes. Useful for mid market ERPs and transitional phases.

### Canvas Layout
Left to right linear flow: ERP export → Secure drop zone → SmartAPI ingest → FIRS → Results return → Archive.

### Elements to Show
- **Left**
  - ERP icon with nightly or hourly scheduler badge
  - File formats: JSON, XML, CSV, TXT. Optional ZIP bundle icon
- **Transfer**
  - SFTP or secure object storage bucket
  - Checksum validation badge and virus scan badge
- **Processing**
  - SmartAPI Ingestion Service
  - Parsing, schema validation, reference checks (TIN, HS, tax codes)
  - Signing and QR generation
- **Submission**
  - SmartAPI → FIRS MBS over TLS 1.3
- **Results**
  - Batch Result Report back to client: success list, reject list with reason codes
  - Optional webhook to notify ERP scheduler
- **Archive**
  - Evidence bundles stored in WORM with 10 year retention

### Callouts
- Large batches supported up to stated limits with parallel processing
- Partial success handled with per invoice outcomes and safe replay

### Style
- Show parallelism with multiple file lanes flowing into a single ingestion stage
- Use green and red markers for cleared vs rejected entries in the result report

---

## Diagram 19: Email Connector Flow

### Intent
Demonstrate the zero integration path where users email invoices and receive acknowledgements and receipts automatically.

### Canvas Layout
Left to right with loop back: Mail client → Email Connector → SmartAPI → FIRS → Email back to sender.

### Elements to Show
- **Left**
  - Mail client or ERP mail gateway icon
  - Attachments: PDF, XML, CSV, ZIP
- **Connector**
  - Email Connector service box
  - Allowed sender domain check
  - Attachment extraction and basic validation
- **Processing**
  - SmartAPI compliance core box: validate, sign, QR, submit
- **Regulator**
  - FIRS MBS endpoint with TLS 1.3
- **Return Loop**
  - Email back to sender with acknowledgement or rejection
  - On success attach or link the cleared invoice and QR
- **Optional**
  - Copy to distribution list for Finance and Compliance
  - Auto filing into a monitored mailbox folder

### Callouts
- Works with any system that can send email
- Ideal for subsidiaries and contractors
- Rejections include structured reason codes for quick correction

### Style
- Use envelope icons and a clear loop back arrow to the inbox
- Keep text minimal on arrows, use labels in callouts

---

## Diagram 20: BlueBox Capture Flow

### Intent
Show how BlueBox delivers compliance with no ERP changes by capturing at print or folder level and routing through SmartAPI.

### Canvas Layout
Left to right: ERP print spool or folder → BlueBox agent → SmartAPI → FIRS → Receipts back to ERP or email → Archive.

### Elements to Show
- **Left**
  - Legacy ERP icon with two outputs:
    - Printer spool icon labeled Print
    - Folder icon labeled Batch or Port
- **Capture**
  - BlueBox Capture Agent box on a server icon
  - Rules engine badge: template detection, delimiter rules, document type recognition
  - Transformation to canonical schema
- **Processing**
  - SmartAPI compliance core box
  - Validation, signing, QR, submission
- **Regulator**
  - FIRS MBS with TLS 1.3
- **Feedback**
  - Path back to ERP status field update or email to Finance
  - Dashboard update for monitoring
- **Archive**
  - Evidence bundle to WORM store

### Callouts
- Zero ERP modification, fast path to compliance
- Works in restricted networks with outbound only HTTPS
- Supports mixed outputs from multiple plants or company codes

### Style
- Show two capture inputs converging into BlueBox
- Use a server silhouette for the BlueBox agent and note supported OS if space allows

---
